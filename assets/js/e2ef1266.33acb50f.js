"use strict";(self.webpackChunksettle_aid=self.webpackChunksettle_aid||[]).push([[2040],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},d=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},k=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=u(n),k=i,m=c["".concat(s,".").concat(k)]||c[k]||p[k]||o;return n?r.createElement(m,a(a({ref:t},d),{},{components:n})):r.createElement(m,a({ref:t},d))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=k;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:i,a[1]=l;for(var u=2;u<o;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}k.displayName="MDXCreateElement"},9945:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var r=n(7462),i=(n(7294),n(3905));const o={sidebar_position:3},a="Login",l={unversionedId:"backend/login",id:"backend/login",title:"Login",description:"Implemented using OAuth2 with Password (and hashing), Bearer with JWT tokens",source:"@site/docs/backend/login.md",sourceDirName:"backend",slug:"/backend/login",permalink:"/docs/backend/login",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/backend/login.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Development Environment",permalink:"/docs/backend/development-environment"},next:{title:"User",permalink:"/docs/backend/user"}},s={},u=[{value:"Global Variables",id:"global-variables",level:2},{value:"Utility Functions",id:"utility-functions",level:2},{value:"Endpoints",id:"endpoints",level:2},{value:"Login Endpoint (/login)",id:"login-endpoint-login",level:3},{value:"Login V2 Endpoint (/v2/login)",id:"login-v2-endpoint-v2login",level:3},{value:"Refresh Token Endpoint (/v2/token/refresh)",id:"refresh-token-endpoint-v2tokenrefresh",level:3},{value:"Security Measures",id:"security-measures",level:2}],d={toc:u},c="wrapper";function p(e){let{components:t,...n}=e;return(0,i.kt)(c,(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"login"},"Login"),(0,i.kt)("p",null,"Implemented using OAuth2 with Password (and hashing), Bearer with JWT tokens\nJWT (JSON Web Tokens) token: Anyone could recover the information from the contents, but it's signed. So, when you receive a token that you emitted, you can verify that you actually emitted it. This module provides authentication endpoints for users. It includes features like login, token refresh, and IP-based rate limiting to prevent brute-force attacks."),(0,i.kt)("p",null,"Reference:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://fastapi.tiangolo.com/tutorial/security/oauth2-jwt/"},"https://fastapi.tiangolo.com/tutorial/security/oauth2-jwt/")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://jwt.io/introduction"},"https://jwt.io/introduction"))),(0,i.kt)("h2",{id:"global-variables"},"Global Variables"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"ip_blocklist: A dictionary to store blocked IP addresses."),(0,i.kt)("li",{parentName:"ul"},"ip_attempts: A dictionary to track login attempts by IP."),(0,i.kt)("li",{parentName:"ul"},"BLOCK_DURATION: Duration for which an IP remains blocked after exceeding max attempts."),(0,i.kt)("li",{parentName:"ul"},"MAX_ATTEMPTS: Maximum allowed login attempts before an IP is blocked.")),(0,i.kt)("h2",{id:"utility-functions"},"Utility Functions"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"check_blocked_ip(request: Request): Checks if the IP from the request is blocked. If blocked and the block duration has not expired, it raises an HTTPException. If the block duration has expired, it unblocks the IP.")),(0,i.kt)("h2",{id:"endpoints"},"Endpoints"),(0,i.kt)("h3",{id:"login-endpoint-login"},"Login Endpoint (/login)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Method: POST"),(0,i.kt)("li",{parentName:"ul"},"Input: user_credentials (username and password)"),(0,i.kt)("li",{parentName:"ul"},"Output: JWT token"),(0,i.kt)("li",{parentName:"ul"},"Description: Authenticates the user and returns a JWT token. If the user exceeds the maximum allowed login attempts, their IP is blocked for a specified duration.")),(0,i.kt)("h3",{id:"login-v2-endpoint-v2login"},"Login V2 Endpoint (/v2/login)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Method: POST"),(0,i.kt)("li",{parentName:"ul"},"Input: user_credentials (username and password)"),(0,i.kt)("li",{parentName:"ul"},"Output: JWT token and refresh token"),(0,i.kt)("li",{parentName:"ul"},"Description: An enhanced version of the login endpoint. In addition to authenticating the user and returning a JWT token, it also provides a refresh token. If a user already has a refresh token, the old one is deleted and a new one is generated.")),(0,i.kt)("h3",{id:"refresh-token-endpoint-v2tokenrefresh"},"Refresh Token Endpoint (/v2/token/refresh)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Method: POST"),(0,i.kt)("li",{parentName:"ul"},"Input: refresh_token"),(0,i.kt)("li",{parentName:"ul"},"Output: New JWT token and the same refresh token"),(0,i.kt)("li",{parentName:"ul"},"Description: Allows the user to get a new JWT token using their refresh token. The refresh token remains the same.")),(0,i.kt)("h2",{id:"security-measures"},"Security Measures"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Rate Limiting: The endpoints are rate-limited to prevent abuse."),(0,i.kt)("li",{parentName:"ul"},"IP Blocking: IP addresses are temporarily blocked after multiple failed login attempts to prevent brute-force attacks."),(0,i.kt)("li",{parentName:"ul"},"JWT: JSON Web Tokens (JWT) are used for authentication and authorization.")))}p.isMDXComponent=!0}}]);